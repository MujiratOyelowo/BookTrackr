!function(e,t,n,o,d){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r="function"==typeof i[o]&&i[o],l=r.cache||{},a="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(t,n){if(!l[t]){if(!e[t]){var d="function"==typeof i[o]&&i[o];if(!n&&d)return d(t,!0);if(r)return r(t,!0);if(a&&"string"==typeof t)return a(t);var u=Error("Cannot find module '"+t+"'");throw u.code="MODULE_NOT_FOUND",u}f.resolve=function(n){var o=e[t][1][n];return null!=o?o:n},f.cache={};var s=l[t]=new c.Module(t);e[t][0].call(s.exports,f,s,s.exports,i)}return l[t].exports;function f(e){var t=f.resolve(e);return!1===t?{}:c(t)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=e,c.cache=l,c.parent=r,c.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(c,"root",{get:function(){return i[o]}}),i[o]=c;for(var u=0;u<t.length;u++)c(t[u]);if(n){var s=c(n);"object"==typeof exports&&"undefined"!=typeof module?module.exports=s:"function"==typeof define&&define.amd&&define(function(){return s})}}({g5uBP:[function(e,t,n,o){var d=e("../scripts/firebase.js"),i=e("firebase/firestore");document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("bookList"),t=document.getElementById("organizeBy"),n=document.getElementById("editModal"),o=document.getElementById("editForm"),r=document.querySelector(".close-btn"),l=document.getElementById("deleteModal"),a=document.getElementById("confirmDelete"),c=document.getElementById("cancelDelete"),u=null,s=null;async function f(){e.innerHTML="";let n=(0,i.collection)(d.db,"books"),o=(await (0,i.getDocs)(n)).docs.map(e=>({id:e.id,...e.data()}));if(t){let e=t.value;"genre"===e?o=o.sort((e,t)=>e.genre.localeCompare(t.genre)):"author"===e&&(o=o.sort((e,t)=>e.author.localeCompare(t.author)))}o.forEach(t=>{let n=document.createElement("li");n.innerHTML=`
        <span><strong>${t.title}</strong> by ${t.author} (${t.genre}) \u{2B50}${t.rating}</span>
        <button class="edit-btn" data-id="${t.id}">Edit</button>
        <button class="delete-btn" data-id="${t.id}">Delete</button>
      `,e.appendChild(n)})}async function g(e){try{await (0,i.deleteDoc)((0,i.doc)(d.db,"books",e)),console.log("Book deleted:",e),f()}catch(e){console.error("Error deleting book:",e)}}async function y(e){try{let t=(0,i.doc)(d.db,"books",e),o=await (0,i.getDoc)(t);if(o.exists()){let t=o.data();u=e,document.getElementById("editTitle").value=t.title,document.getElementById("editAuthor").value=t.author,document.getElementById("editGenre").value=t.genre,document.getElementById("editRating").value=t.rating,n.style.display="block"}else console.log("Book doesn't exist!")}catch(e){console.error("Error fetching book for edit:",e)}}a.addEventListener("click",()=>{s&&(g(s),s=null),l.style.display="none"}),c.addEventListener("click",()=>{s=null,l.style.display="none"}),o.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("editTitle").value.trim(),o=document.getElementById("editAuthor").value.trim(),r=document.getElementById("editGenre").value,l=document.getElementById("editRating").value;try{let e=(0,i.doc)(d.db,"books",u);await (0,i.updateDoc)(e,{title:t,author:o,genre:r,rating:l}),console.log("Book updated:",u),n.style.display="none",f()}catch(e){console.error("Error updating book:",e)}}),r.addEventListener("click",()=>{n.style.display="none"}),window.addEventListener("click",e=>{e.target===n&&(n.style.display="none"),e.target===l&&(l.style.display="none")}),e.addEventListener("click",e=>{e.target.classList.contains("delete-btn")?(s=e.target.getAttribute("data-id"),l.style.display="block"):e.target.classList.contains("edit-btn")&&y(e.target.getAttribute("data-id"))}),t&&t.addEventListener("change",()=>{f()}),f()})},{"../scripts/firebase.js":"6JwWS","firebase/firestore":"59KHr"}]},["g5uBP"],"g5uBP","parcelRequire94c2");
//# sourceMappingURL=myBooks.f20db798.js.map
