!function(e,t,o,n,r){var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i="function"==typeof l[n]&&l[n],d=i.cache||{},a="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(t,o){if(!d[t]){if(!e[t]){var r="function"==typeof l[n]&&l[n];if(!o&&r)return r(t,!0);if(i)return i(t,!0);if(a&&"string"==typeof t)return a(t);var u=Error("Cannot find module '"+t+"'");throw u.code="MODULE_NOT_FOUND",u}f.resolve=function(o){var n=e[t][1][o];return null!=n?n:o},f.cache={};var s=d[t]=new c.Module(t);e[t][0].call(s.exports,f,s,s.exports,l)}return d[t].exports;function f(e){var t=f.resolve(e);return!1===t?{}:c(t)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=e,c.cache=d,c.parent=i,c.register=function(t,o){e[t]=[function(e,t){t.exports=o},{}]},Object.defineProperty(c,"root",{get:function(){return l[n]}}),l[n]=c;for(var u=0;u<t.length;u++)c(t[u]);if(o){var s=c(o);"object"==typeof exports&&"undefined"!=typeof module?module.exports=s:"function"==typeof define&&define.amd&&define(function(){return s})}}({gPU7b:[function(e,t,o,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js"),l=e("./firebase"),i=e("firebase/firestore"),d=e("loglevel"),a=r.interopDefault(d);document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("bookForm"),t=document.getElementById("bookList"),o=document.getElementById("searchBar"),n=document.getElementById("filterGenre"),r=document.getElementById("editModal"),d=document.getElementById("editForm"),c=document.querySelector(".close-btn"),u=null;async function s(e,t,o,n){try{let r=await (0,i.addDoc)((0,i.collection)(l.db,"books"),{title:e,author:t,genre:o,rating:n});(0,a.default).info("Book added with ID:",r.id),f()}catch(e){(0,a.default).error("Error adding book:",e)}}async function f(){t.innerHTML="";try{let e=(0,i.collection)(l.db,"books"),t=(await (0,i.getDocs)(e)).docs.map(e=>({id:e.id,...e.data()}));console.log(t),t.forEach(e=>g(e))}catch(e){console.error("Error loading books:",e)}}function g(e){let o=document.createElement("li");o.innerHTML=`
            <span><strong>${e.title}</strong> by ${e.author} (${e.genre}) \u{2B50}${e.rating}</span>
            <button class="edit-btn" data-id="${e.id}">Edit</button>
            <button class="delete-btn" data-id="${e.id}">Delete</button>
        `,t.appendChild(o)}async function p(e){try{await (0,i.deleteDoc)((0,i.doc)(l.db,"books",e)),console.log("Book deleted:",e),f()}catch(e){console.error("Error deleting book:",e)}}async function y(e){try{let t=(0,i.doc)(l.db,"books",e),o=await (0,i.getDoc)(t);if(o.exists()){let t=o.data();u=e,document.getElementById("editTitle").value=t.title,document.getElementById("editAuthor").value=t.author,document.getElementById("editGenre").value=t.genre,document.getElementById("editRating").value=t.rating,r.style.display="block"}else console.log("Book doesn't exist!")}catch(e){console.error("Error fetching book for edit:",e)}}async function v(){let e=o.value.toLowerCase(),r=n.value;try{let o=(0,i.collection)(l.db,"books"),n=(await (0,i.getDocs)(o)).docs.map(e=>({id:e.id,...e.data()})).filter(t=>{let o=t.title.toLowerCase().includes(e)||t.author.toLowerCase().includes(e),n=!r||t.genre===r;return o&&n});t.innerHTML="",n.forEach(e=>g(e))}catch(e){console.error("Error filtering books:",e)}}c.addEventListener("click",()=>{r.style.display="none"}),window.addEventListener("click",e=>{e.target===r&&(r.style.display="none")}),d.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("editTitle").value.trim(),o=document.getElementById("editAuthor").value.trim(),n=document.getElementById("editGenre").value,d=document.getElementById("editRating").value;try{let e=(0,i.doc)(l.db,"books",u);await (0,i.updateDoc)(e,{title:t,author:o,genre:n,rating:d}),console.log("Book updated:",u),r.style.display="none",f()}catch(e){console.error("Error updating book:",e)}}),e.addEventListener("submit",t=>{t.preventDefault();let o=document.getElementById("title").value.trim(),n=document.getElementById("author").value.trim(),r=document.getElementById("genre").value,l=document.getElementById("rating").value;o&&n&&r&&l&&(s(o,n,r,l),e.reset())}),t.addEventListener("click",e=>{e.target.classList.contains("delete-btn")?p(e.target.getAttribute("data-id")):e.target.classList.contains("edit-btn")&&y(e.target.getAttribute("data-id"))}),o.addEventListener("input",v),n.addEventListener("change",v),f()}),(0,a.default).info("Application started"),(0,a.default).debug("Debugging information"),(0,a.default).error("An error occurred")},{"./firebase":"6JwWS","firebase/firestore":"59KHr",loglevel:"5ZY8d","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"5ZY8d":[function(e,t,o,n){var r;r=function(){var e=function(){},t="undefined",o=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"],r={},l=null;function i(e,t){var o=e[t];if("function"==typeof o.bind)return o.bind(e);try{return Function.prototype.bind.call(o,e)}catch(t){return function(){return Function.prototype.apply.apply(o,[e,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(){for(var o=this.getLevel(),r=0;r<n.length;r++){var l=n[r];this[l]=r<o?e:this.methodFactory(l,o,this.name)}if(this.log=this.debug,typeof console===t&&o<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){typeof console!==t&&(a.call(this),this[e].apply(this,arguments))}}function u(n,r,l){var a;return"debug"===(a=n)&&(a="log"),typeof console!==t&&("trace"===a&&o?d:void 0!==console[a]?i(console,a):void 0!==console.log?i(console,"log"):e)||c.apply(this,arguments)}function s(e,o){var i,d,c,s=this,f="loglevel";function g(){var e;if(typeof window!==t&&f){try{e=window.localStorage[f]}catch(e){}if(typeof e===t)try{var o=window.document.cookie,n=encodeURIComponent(f),r=o.indexOf(n+"=");-1!==r&&(e=/^([^;]+)/.exec(o.slice(r+n.length+1))[1])}catch(e){}return void 0===s.levels[e]&&(e=void 0),e}}function p(e){var t=e;if("string"==typeof t&&void 0!==s.levels[t.toUpperCase()]&&(t=s.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=s.levels.SILENT)return t;throw TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?f+=":"+e:"symbol"==typeof e&&(f=void 0),s.name=e,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=o||u,s.getLevel=function(){return null!=c?c:null!=d?d:i},s.setLevel=function(e,o){return c=p(e),!1!==o&&function(e){var o=(n[e]||"silent").toUpperCase();if(typeof window!==t&&f){try{window.localStorage[f]=o;return}catch(e){}try{window.document.cookie=encodeURIComponent(f)+"="+o+";"}catch(e){}}}(c),a.call(s)},s.setDefaultLevel=function(e){d=p(e),g()||s.setLevel(e,!1)},s.resetLevel=function(){c=null,function(){if(typeof window!==t&&f){try{window.localStorage.removeItem(f)}catch(e){}try{window.document.cookie=encodeURIComponent(f)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),a.call(s)},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)},s.rebuild=function(){if(l!==s&&(i=p(l.getLevel())),a.call(s),l===s)for(var e in r)r[e].rebuild()},i=p(l?l.getLevel():"WARN");var y=g();null!=y&&(c=p(y)),a.call(s)}(l=new s).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw TypeError("You must supply a name when creating a logger.");var t=r[e];return t||(t=r[e]=new s(e,l.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return l.noConflict=function(){return typeof window!==t&&window.log===l&&(window.log=f),l},l.getLoggers=function(){return r},l.default=l,l},"function"==typeof define&&define.amd?define(r):t.exports?t.exports=r():this.log=r()},{}]},["gPU7b"],"gPU7b","parcelRequire94c2");
//# sourceMappingURL=index.b8711ee1.js.map
