!function(e,t,o,n,l){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i="function"==typeof r[n]&&r[n],d=i.cache||{},a="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(t,o){if(!d[t]){if(!e[t]){var l="function"==typeof r[n]&&r[n];if(!o&&l)return l(t,!0);if(i)return i(t,!0);if(a&&"string"==typeof t)return a(t);var u=Error("Cannot find module '"+t+"'");throw u.code="MODULE_NOT_FOUND",u}f.resolve=function(o){var n=e[t][1][o];return null!=n?n:o},f.cache={};var s=d[t]=new c.Module(t);e[t][0].call(s.exports,f,s,s.exports,r)}return d[t].exports;function f(e){var t=f.resolve(e);return!1===t?{}:c(t)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=e,c.cache=d,c.parent=i,c.register=function(t,o){e[t]=[function(e,t){t.exports=o},{}]},Object.defineProperty(c,"root",{get:function(){return r[n]}}),r[n]=c;for(var u=0;u<t.length;u++)c(t[u]);if(o){var s=c(o);"object"==typeof exports&&"undefined"!=typeof module?module.exports=s:"function"==typeof define&&define.amd&&define(function(){return s})}}({gPU7b:[function(e,t,o,n){var l=e("@parcel/transformer-js/src/esmodule-helpers.js"),r=e("./firebase"),i=e("firebase/firestore"),d=e("loglevel"),a=l.interopDefault(d);document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("bookForm"),t=document.getElementById("bookList"),o=document.getElementById("searchBar"),n=document.getElementById("filterGenre"),l=document.getElementById("editModal"),d=document.getElementById("editForm"),c=document.querySelector(".close-btn"),u=document.getElementById("deleteModal"),s=document.getElementById("confirmDelete"),f=document.getElementById("cancelDelete"),g=null,y=null;async function p(e,t,o,n){try{let l=await (0,i.addDoc)((0,i.collection)(r.db,"books"),{title:e,author:t,genre:o,rating:n});(0,a.default).info("Book added with ID:",l.id),m()}catch(e){(0,a.default).error("Error adding book:",e)}}async function m(){t.innerHTML="";try{let e=(0,i.collection)(r.db,"books"),t=(await (0,i.getDocs)(e)).docs.map(e=>({id:e.id,...e.data()}));console.log(t),t.forEach(e=>v(e))}catch(e){console.error("Error loading books:",e)}}function v(e){let o=document.createElement("li");o.innerHTML=`
            <span><strong>${e.title}</strong> by ${e.author} (${e.genre}) \u{2B50}${e.rating}</span>
            <button class="edit-btn" data-id="${e.id}">Edit</button>
            <button class="delete-btn" data-id="${e.id}">Delete</button>
        `,t.appendChild(o)}async function b(e){try{await (0,i.deleteDoc)((0,i.doc)(r.db,"books",e)),console.log("Book deleted:",e),m()}catch(e){console.error("Error deleting book:",e)}}async function h(e){try{let t=(0,i.doc)(r.db,"books",e),o=await (0,i.getDoc)(t);if(o.exists()){let t=o.data();g=e,document.getElementById("editTitle").value=t.title,document.getElementById("editAuthor").value=t.author,document.getElementById("editGenre").value=t.genre,document.getElementById("editRating").value=t.rating,l.style.display="block"}else console.log("Book doesn't exist!")}catch(e){console.error("Error fetching book for edit:",e)}}async function w(){let e=o.value.toLowerCase(),l=n.value;try{let o=(0,i.collection)(r.db,"books"),n=(await (0,i.getDocs)(o)).docs.map(e=>({id:e.id,...e.data()})).filter(t=>{let o=t.title.toLowerCase().includes(e)||t.author.toLowerCase().includes(e),n=!l||t.genre===l;return o&&n});t.innerHTML="",n.forEach(e=>v(e))}catch(e){console.error("Error filtering books:",e)}}c.addEventListener("click",()=>{l.style.display="none"}),window.addEventListener("click",e=>{e.target===l&&(l.style.display="none"),e.target===u&&(u.style.display="none")}),d.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("editTitle").value.trim(),o=document.getElementById("editAuthor").value.trim(),n=document.getElementById("editGenre").value,d=document.getElementById("editRating").value;try{let e=(0,i.doc)(r.db,"books",g);await (0,i.updateDoc)(e,{title:t,author:o,genre:n,rating:d}),console.log("Book updated:",g),l.style.display="none",m()}catch(e){console.error("Error updating book:",e)}}),e.addEventListener("submit",t=>{t.preventDefault();let o=document.getElementById("title").value.trim(),n=document.getElementById("author").value.trim(),l=document.getElementById("genre").value,r=document.getElementById("rating").value;o&&n&&l&&r&&(p(o,n,l,r),e.reset())}),t.addEventListener("click",e=>{e.target.classList.contains("delete-btn")?(y=e.target.getAttribute("data-id"),u.style.display="block"):e.target.classList.contains("edit-btn")&&h(e.target.getAttribute("data-id"))}),s.addEventListener("click",()=>{y&&(b(y),y=null),u.style.display="none"}),f.addEventListener("click",()=>{y=null,u.style.display="none"}),o.addEventListener("input",w),n.addEventListener("change",w),m()}),(0,a.default).info("Application started"),(0,a.default).debug("Debugging information"),(0,a.default).error("An error occurred")},{"./firebase":"6JwWS","firebase/firestore":"59KHr",loglevel:"5ZY8d","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"5ZY8d":[function(e,t,o,n){var l;l=function(){var e=function(){},t="undefined",o=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"],l={},r=null;function i(e,t){var o=e[t];if("function"==typeof o.bind)return o.bind(e);try{return Function.prototype.bind.call(o,e)}catch(t){return function(){return Function.prototype.apply.apply(o,[e,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(){for(var o=this.getLevel(),l=0;l<n.length;l++){var r=n[l];this[r]=l<o?e:this.methodFactory(r,o,this.name)}if(this.log=this.debug,typeof console===t&&o<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){typeof console!==t&&(a.call(this),this[e].apply(this,arguments))}}function u(n,l,r){var a;return"debug"===(a=n)&&(a="log"),typeof console!==t&&("trace"===a&&o?d:void 0!==console[a]?i(console,a):void 0!==console.log?i(console,"log"):e)||c.apply(this,arguments)}function s(e,o){var i,d,c,s=this,f="loglevel";function g(){var e;if(typeof window!==t&&f){try{e=window.localStorage[f]}catch(e){}if(typeof e===t)try{var o=window.document.cookie,n=encodeURIComponent(f),l=o.indexOf(n+"=");-1!==l&&(e=/^([^;]+)/.exec(o.slice(l+n.length+1))[1])}catch(e){}return void 0===s.levels[e]&&(e=void 0),e}}function y(e){var t=e;if("string"==typeof t&&void 0!==s.levels[t.toUpperCase()]&&(t=s.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=s.levels.SILENT)return t;throw TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?f+=":"+e:"symbol"==typeof e&&(f=void 0),s.name=e,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=o||u,s.getLevel=function(){return null!=c?c:null!=d?d:i},s.setLevel=function(e,o){return c=y(e),!1!==o&&function(e){var o=(n[e]||"silent").toUpperCase();if(typeof window!==t&&f){try{window.localStorage[f]=o;return}catch(e){}try{window.document.cookie=encodeURIComponent(f)+"="+o+";"}catch(e){}}}(c),a.call(s)},s.setDefaultLevel=function(e){d=y(e),g()||s.setLevel(e,!1)},s.resetLevel=function(){c=null,function(){if(typeof window!==t&&f){try{window.localStorage.removeItem(f)}catch(e){}try{window.document.cookie=encodeURIComponent(f)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),a.call(s)},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)},s.rebuild=function(){if(r!==s&&(i=y(r.getLevel())),a.call(s),r===s)for(var e in l)l[e].rebuild()},i=y(r?r.getLevel():"WARN");var p=g();null!=p&&(c=y(p)),a.call(s)}(r=new s).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw TypeError("You must supply a name when creating a logger.");var t=l[e];return t||(t=l[e]=new s(e,r.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return r.noConflict=function(){return typeof window!==t&&window.log===r&&(window.log=f),r},r.getLoggers=function(){return l},r.default=r,r},"function"==typeof define&&define.amd?define(l):t.exports?t.exports=l():this.log=l()},{}]},["gPU7b"],"gPU7b","parcelRequire94c2");
//# sourceMappingURL=index.ee2f23a5.js.map
