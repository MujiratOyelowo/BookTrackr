!function(e,t,n,o,r){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},d="function"==typeof i[o]&&i[o],l=d.cache||{},a="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function s(t,n){if(!l[t]){if(!e[t]){var r="function"==typeof i[o]&&i[o];if(!n&&r)return r(t,!0);if(d)return d(t,!0);if(a&&"string"==typeof t)return a(t);var c=Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}f.resolve=function(n){var o=e[t][1][n];return null!=o?o:n},f.cache={};var u=l[t]=new s.Module(t);e[t][0].call(u.exports,f,u,u.exports,i)}return l[t].exports;function f(e){var t=f.resolve(e);return!1===t?{}:s(t)}}s.isParcelRequire=!0,s.Module=function(e){this.id=e,this.bundle=s,this.exports={}},s.modules=e,s.cache=l,s.parent=d,s.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(s,"root",{get:function(){return i[o]}}),i[o]=s;for(var c=0;c<t.length;c++)s(t[c]);if(n){var u=s(n);"object"==typeof exports&&"undefined"!=typeof module?module.exports=u:"function"==typeof define&&define.amd&&define(function(){return u})}}({g5uBP:[function(e,t,n,o){var r=e("./filterBooks.js"),i=e("../scripts/firebase.js"),d=e("firebase/firestore");document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("bookList"),t=document.getElementById("searchBar"),n=document.getElementById("filterGenre"),o=document.getElementById("organizeBy"),l=document.getElementById("editModal"),a=document.getElementById("editForm"),s=document.querySelector(".close-btn"),c=document.getElementById("deleteModal"),u=document.getElementById("confirmDelete"),f=document.getElementById("cancelDelete"),g=null,m=null;async function y(){e.innerHTML="";let t=(0,d.collection)(i.db,"books"),n=(await (0,d.getDocs)(t)).docs.map(e=>({id:e.id,...e.data()}));if(o){let e=o.value;"genre"===e?n=n.sort((e,t)=>e.genre.localeCompare(t.genre)):"author"===e&&(n=n.sort((e,t)=>e.author.localeCompare(t.author)))}n.forEach(t=>{let n=document.createElement("li");n.innerHTML=`
        <span><strong>${t.title}</strong> by ${t.author} (${t.genre}) \u{2B50}${t.rating}</span>
        <button class="edit-btn" data-id="${t.id}">Edit</button>
        <button class="delete-btn" data-id="${t.id}">Delete</button>
      `,e.appendChild(n)})}async function p(e){try{await (0,d.deleteDoc)((0,d.doc)(i.db,"books",e)),console.log("Book deleted:",e),y()}catch(e){console.error("Error deleting book:",e)}}async function b(e){try{let t=(0,d.doc)(i.db,"books",e),n=await (0,d.getDoc)(t);if(n.exists()){let t=n.data();g=e,document.getElementById("editTitle").value=t.title,document.getElementById("editAuthor").value=t.author,document.getElementById("editGenre").value=t.genre,document.getElementById("editRating").value=t.rating,l.style.display="block"}else console.log("Book doesn't exist!")}catch(e){console.error("Error fetching book for edit:",e)}}async function E(){let o=t.value.toLowerCase(),i=n.value;await (0,r.filterAndDisplayBooks)(o,i,e)}u.addEventListener("click",()=>{m&&(p(m),m=null),c.style.display="none"}),f.addEventListener("click",()=>{m=null,c.style.display="none"}),a.addEventListener("submit",async e=>{e.preventDefault();let t=document.getElementById("editTitle").value.trim(),n=document.getElementById("editAuthor").value.trim(),o=document.getElementById("editGenre").value,r=document.getElementById("editRating").value;try{let e=(0,d.doc)(i.db,"books",g);await (0,d.updateDoc)(e,{title:t,author:n,genre:o,rating:r}),console.log("Book updated:",g),l.style.display="none",y()}catch(e){console.error("Error updating book:",e)}}),s.addEventListener("click",()=>{l.style.display="none"}),window.addEventListener("click",e=>{e.target===l&&(l.style.display="none"),e.target===c&&(c.style.display="none")}),e.addEventListener("click",e=>{e.target.classList.contains("delete-btn")?(m=e.target.getAttribute("data-id"),c.style.display="block"):e.target.classList.contains("edit-btn")&&b(e.target.getAttribute("data-id"))}),o&&o.addEventListener("change",()=>{y()}),t&&t.addEventListener("input",E),n&&n.addEventListener("change",E),E(),y()})},{"../scripts/firebase.js":"6JwWS","firebase/firestore":"59KHr","./filterBooks.js":"11t4W"}],"11t4W":[function(e,t,n,o){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"filterAndDisplayBooks",()=>l);var i=e("firebase/firestore"),d=e("./firebase.js");async function l(e,t,n){try{let o=(0,i.collection)(d.db,"books"),r=(await (0,i.getDocs)(o)).docs.map(e=>({id:e.id,...e.data()})).filter(n=>{let o=n.title.toLowerCase().includes(e)||n.author.toLowerCase().includes(e),r=!t||n.genre===t;return o&&r});n.innerHTML="",r.forEach(e=>{let t=document.createElement("li");t.innerHTML=`
        <span><strong>${e.title}</strong> by ${e.author} (${e.genre}) \u{2B50}${e.rating}</span>
        <button class="edit-btn" data-id="${e.id}">Edit</button>
        <button class="delete-btn" data-id="${e.id}">Delete</button>
      `,n.appendChild(t)})}catch(e){console.error("Error filtering books:",e)}}},{"firebase/firestore":"59KHr","./firebase.js":"6JwWS","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}]},["g5uBP"],"g5uBP","parcelRequire94c2");
//# sourceMappingURL=myBooks.3a7ddb31.js.map
